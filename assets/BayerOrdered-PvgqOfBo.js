import{w as u,a as f,o as t,t as j}from"./chunk-WWGJGFF6-CLcwhb55.js";import{C as w}from"./main.es-D2MorOr5.js";const y=(e,a,s)=>{const i=(e+a*s.width)*4,l=s.pixels[i],o=s.pixels[i+1],h=s.pixels[i+2];return .2126*l+.7152*o+.0722*h},b=(e,a,s,i)=>{const l=(e+a*s.width)*4;s.pixels[l]=i,s.pixels[l+1]=i,s.pixels[l+2]=i},v=e=>{let a=!1,s=0,i,l;const o=window.screen.width>window.screen.height?320:240,h=window.screen.width>window.screen.height?240:320;let c=[[]];e.setup=()=>{e.createCanvas(o,h,e.P2D),e.frameRate(60),e.pixelDensity(1),i=e.createCapture(e.VIDEO),i.size(o,h),i.hide();const n=e.select("#savePhotoButton");if(!n)return;const r=()=>{e.saveCanvas("FSD","png")};n.mousePressed(r)},e.updateWithProps=n=>{if(n.ditheringOn!==void 0&&(a=n.ditheringOn),n.onFPSChange!==void 0&&(l=n.onFPSChange),n.bayerSize!==void 0){s=n.bayerSize,s==2?c=[[0,2],[3,1]]:s==4?c=[[0,8,2,10],[12,4,14,6],[3,11,1,9],[15,7,13,5]]:s==8&&(c=[[0,32,8,40,2,34,10,42],[48,16,56,24,50,18,58,26],[12,44,4,36,14,46,6,38],[60,28,52,20,62,30,54,22],[3,35,11,43,1,33,9,41],[51,19,59,27,49,17,57,25],[15,47,7,39,13,45,5,37],[63,31,55,23,61,29,53,21]]);const r=1/(s*s);for(let d=0;d<s;d++)for(let x=0;x<s;x++)c[d][x]*=r*256}},e.draw=()=>{e.translate(i.width,0),e.scale(-1,1),e.image(i,0,0),e.scale(-1,1),e.translate(-i.width,0);const n=e.frameRate();if(l?.(n),!(!a||s==0)){e.loadPixels();for(let r=0;r<i.height;r++)for(let d=0;d<i.width;d++){const x=y(d,r,e),m=r%s,g=d%s;b(d,r,e,x>c[m][g]?255:0)}e.updatePixels()}}},N=u(function(){const[a,s]=f.useState(!1),[i,l]=f.useState(!0),[o,h]=f.useState(2),c=f.useRef(null),n=r=>{c.current&&(c.current.textContent=` FPS: ${r.toFixed(2)}`)};return t.jsxs("div",{className:"flex flex-col h-dvh items-center justify-center font-[Typewriter]",children:[t.jsxs("div",{className:"flex flex-col h-full items-center justify-center",children:[t.jsx("h1",{className:"text-2xl mb-5",children:"Bayer Ordered Dithering"}),t.jsx("div",{hidden:!i,ref:c,className:"text-black bg-white p-1 rounded text-2xl mb-5 font-mono",children:"FPS: 0.00"}),t.jsx(w,{sketch:v,ditheringOn:a,bayerSize:o,onFPSChange:n})]}),t.jsxs("div",{className:"flex w-full text-white p-3 bg-stone-900 h-full items-center justify-around flex-1",children:[t.jsxs("div",{className:"flex w-full justify-around flex-1 items-center md:flex-row flex-col",children:[t.jsx(j,{to:"/",className:"flex items-center",children:t.jsx("button",{className:"cursor-pointer text-black p-2 m-1 bg-white rounded-md hover:bg-gray-200",children:"Back to Home"})}),t.jsx("button",{id:"savePhotoButton",className:"cursor-pointer text-black p-2 m-1 bg-white rounded-md hover:bg-gray-200",children:"Save Photo"})]}),t.jsxs("div",{className:"w-full flex-1 flex justify-around items-center  md:flex-row flex-col",children:[t.jsxs("div",{children:[t.jsx("input",{className:"mr-3",id:"ditheringToggle",type:"checkbox",checked:a,onChange:()=>s(!a)}),t.jsx("label",{htmlFor:"ditheringToggle",children:"Toggle Dithering"})]}),t.jsxs("div",{children:[t.jsx("input",{className:"mr-3",id:"fpsToggle",type:"checkbox",checked:i,onChange:()=>l(!i)}),t.jsx("label",{htmlFor:"fpsToggle",children:"Show FPS"})]}),t.jsxs("div",{children:[t.jsx("label",{children:"Bayer Matrix Size:"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{children:[t.jsx("input",{className:"mr-3",name:"bayerSize",type:"radio",checked:o==2,onChange:()=>h(2)}),"2"]}),t.jsxs("div",{children:[t.jsx("input",{className:"mr-3",name:"bayerSize",type:"radio",checked:o==4,onChange:()=>h(4)}),"4"]}),t.jsxs("div",{children:[t.jsx("input",{className:"mr-3",name:"bayerSize",type:"radio",checked:o==8,onChange:()=>h(8)}),"8"]})]})]})]})]})]})});export{N as default};
