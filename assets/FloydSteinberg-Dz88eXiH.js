import{w as j,a as u,o as n,t as P}from"./chunk-WWGJGFF6-CLcwhb55.js";import{C as S}from"./main.es-_h-BPY0W.js";const m=(e,o)=>e+o<0?0:e+o>255?255:e+o,g=(e,o,t)=>{const r=(e+o*t.width)*4,c=t.pixels[r],h=t.pixels[r+1],l=t.pixels[r+2];return .2126*c+.7152*h+.0722*l},x=(e,o,t,r)=>{const c=(e+o*t.width)*4;t.pixels[c]=r,t.pixels[c+1]=r,t.pixels[c+2]=r},v=e=>{let o=!1,t,r;const c=window.screen.width>window.screen.height?320:240,h=window.screen.width>window.screen.height?240:320;e.setup=()=>{e.createCanvas(c,h,e.P2D),e.frameRate(60),e.pixelDensity(1),t=e.createCapture(e.VIDEO),t.size(c,h),t.hide();const l=e.select("#savePhotoButton");if(!l)return;const s=()=>{e.saveCanvas("FSD","png")};l.mousePressed(s)},e.updateWithProps=l=>{l.ditheringOn!==void 0&&(o=l.ditheringOn),l.onFPSChange!==void 0&&(r=l.onFPSChange)},e.draw=()=>{e.translate(t.width,0),e.scale(-1,1),e.image(t,0,0),e.scale(-1,1),e.translate(-t.width,0);const l=e.frameRate();if(r?.(l),!!o){e.loadPixels();for(let s=0;s<t.height;s++)for(let i=0;i<t.width;i++){const w=g(i,s,e),b=w>127?255:0,f=w-b;if(x(i,s,e,b),i+1<t.width){const a=g(i+1,s,e),d=m(a,f*7/16);x(i+1,s,e,d)}if(i-1>=0&&s+1<t.height){const a=g(i-1,s+1,e),d=m(a,f*3/16);x(i-1,s+1,e,d)}if(s+1<t.height){const a=g(i,s+1,e),d=m(a,f*5/16);x(i,s+1,e,d)}if(i+1<t.width&&s+1<t.height){const a=g(i+1,s+1,e),d=m(a,f*1/16);x(i+1,s+1,e,d)}}e.updatePixels()}}},y=j(function(){const[o,t]=u.useState(!1),[r,c]=u.useState(!0),h=u.useRef(null),l=s=>{h.current&&(h.current.textContent=` FPS: ${s.toFixed(2)}`)};return n.jsxs("div",{className:"flex flex-col h-dvh items-center justify-center font-[Typewriter]",children:[n.jsxs("div",{className:"flex flex-col h-full items-center justify-center",children:[n.jsx("h1",{className:"text-2xl mb-5",children:"Floyd-Steinberg Dithering"}),n.jsx("div",{hidden:!r,ref:h,className:"text-black bg-white p-1 rounded text-2xl mb-5 font-mono",children:"FPS: 0.00"}),n.jsx(S,{sketch:v,ditheringOn:o,onFPSChange:l})]}),n.jsxs("div",{className:"flex w-full text-white p-3 bg-stone-900 h-full items-center justify-around flex-1",children:[n.jsxs("div",{className:"flex w-full justify-around flex-1 items-center md:flex-row flex-col",children:[n.jsx(P,{to:"/",className:"flex items-center",children:n.jsx("button",{className:"cursor-pointer text-black p-2 m-1 bg-white rounded-md hover:bg-gray-200",children:"Back to Home"})}),n.jsx("button",{id:"savePhotoButton",className:"cursor-pointer text-black p-2 m-1 bg-white rounded-md hover:bg-gray-200",children:"Save Photo"})]}),n.jsxs("div",{className:"w-full flex-1 flex justify-around items-center  md:flex-row flex-col",children:[n.jsxs("div",{children:[n.jsx("input",{className:"mr-3",id:"ditheringToggle",type:"checkbox",checked:o,onChange:()=>t(!o)}),n.jsx("label",{htmlFor:"ditheringToggle",children:"Toggle Dithering"})]}),n.jsxs("div",{children:[n.jsx("input",{className:"mr-3",id:"fpsToggle",type:"checkbox",checked:r,onChange:()=>c(!r)}),n.jsx("label",{htmlFor:"fpsToggle",children:"Show FPS"})]})]})]})]})});export{y as default};
